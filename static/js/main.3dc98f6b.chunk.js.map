{"version":3,"sources":["Components/NetflixLogo.tsx","Components/Landing/step1.svg","Components/Landing/step3.svg","Components/Landing/Landing.tsx","utils/shareApi.ts","Components/PosterTopX/top5.jpg","Components/PosterTopX/PosterTopX.tsx","consts.ts","utils/parseCsvData.ts","utils/processCsvData.ts","utils/indexOfMultiple.ts","App.tsx","reportWebVitals.ts","index.tsx"],"names":["NetflixLogo","id","viewBox","fill","d","Landing","state","status","uploadFile","e","preventDefault","setState","file","target","files","reader","FileReader","onload","content","result","props","fileContentCallback","toString","onerror","err","readAsText","getModal","Modal","Header","Title","this","Container","Row","Col","className","icon","faComments","faInfoCircle","src","step1","alt","href","rel","faLink","step3","htmlFor","faCloudUploadAlt","type","onChange","accept","hidden","React","Component","shareApi","blob","a","navigator","share","console","log","error","EXPECTED_IMAGE_DIMENSIONS","PosterTopX","canvasRef","createRef","ctx","backgroundImage","height","width","posterImage","showShare","undefined","getBackgroundImage","memoize","imgSrc","img","Image","setAttribute","getPosterImage","download","current","document","createElement","toDataURL","click","toBlob","onClick","faShare","getContext","forceUpdate","align","titles","year","drawImage","backgroundImageSrc","Math","min","font","fillStyle","fillText","slice","forEach","t","i","ref","faDownload","SERVER_URL","window","location","protocol","process","REACT_APP_SERVER_DOMAIN","YEAR","parseCsvData","data","parsedData","csvParse","rows","length","rawRow","push","Date","topNodeId","processCsvData","titleYearMap","Map","multiplier","row","getFullYear","has","set","serie","movie","yearData","get","index","string","searchStrings","indexOf","indexOfMultiple","typeKey","nameKey","count","titleMap","title","titleData","titleCount","updateTitleData","App","csvData","errors","topXData","processData","getTopXData","serieData","Array","from","sort","b","size","map","getImgSrcFromTitle","fetch","then","response","json","results","backdrop_path","catch","renderContent","fetchCsv","body","getReader","decoder","TextDecoder","read","decode","value","Error","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.3dc98f6b.chunk.js","sourcesContent":["import React from 'react'\n\nexport default function NetflixLogo() {\n  return (\n    <svg id=\"netflixLogo\" viewBox=\"0 0 111 30\"><g><path fill=\"#e50914\" d=\"M105.06233,14.2806261 L110.999156,30 C109.249227,29.7497422 107.500234,29.4366857 105.718437,29.1554972 L102.374168,20.4686475 L98.9371075,28.4375293 C97.2499766,28.1563408 95.5928391,28.061674 93.9057081,27.8432843 L99.9372012,14.0931671 L94.4680851,-5.68434189e-14 L99.5313525,-5.68434189e-14 L102.593495,7.87421502 L105.874965,-5.68434189e-14 L110.999156,-5.68434189e-14 L105.06233,14.2806261 Z M90.4686475,-5.68434189e-14 L85.8749649,-5.68434189e-14 L85.8749649,27.2499766 C87.3746368,27.3437061 88.9371075,27.4055675 90.4686475,27.5930265 L90.4686475,-5.68434189e-14 Z M81.9055207,26.93692 C77.7186241,26.6557316 73.5307901,26.4064111 69.250164,26.3117443 L69.250164,-5.68434189e-14 L73.9366389,-5.68434189e-14 L73.9366389,21.8745899 C76.6248008,21.9373887 79.3120255,22.1557784 81.9055207,22.2804387 L81.9055207,26.93692 Z M64.2496954,10.6561065 L64.2496954,15.3435186 L57.8442216,15.3435186 L57.8442216,25.9996251 L53.2186709,25.9996251 L53.2186709,-5.68434189e-14 L66.3436123,-5.68434189e-14 L66.3436123,4.68741213 L57.8442216,4.68741213 L57.8442216,10.6561065 L64.2496954,10.6561065 Z M45.3435186,4.68741213 L45.3435186,26.2498828 C43.7810479,26.2498828 42.1876465,26.2498828 40.6561065,26.3117443 L40.6561065,4.68741213 L35.8121661,4.68741213 L35.8121661,-5.68434189e-14 L50.2183897,-5.68434189e-14 L50.2183897,4.68741213 L45.3435186,4.68741213 Z M30.749836,15.5928391 C28.687787,15.5928391 26.2498828,15.5928391 24.4999531,15.6875059 L24.4999531,22.6562939 C27.2499766,22.4678976 30,22.2495079 32.7809542,22.1557784 L32.7809542,26.6557316 L19.812541,27.6876933 L19.812541,-5.68434189e-14 L32.7809542,-5.68434189e-14 L32.7809542,4.68741213 L24.4999531,4.68741213 L24.4999531,10.9991564 C26.3126816,10.9991564 29.0936358,10.9054269 30.749836,10.9054269 L30.749836,15.5928391 Z M4.78114163,12.9684132 L4.78114163,29.3429562 C3.09401069,29.5313525 1.59340144,29.7497422 0,30 L0,-5.68434189e-14 L4.4690224,-5.68434189e-14 L10.562377,17.0315868 L10.562377,-5.68434189e-14 L15.2497891,-5.68434189e-14 L15.2497891,28.061674 C13.5935889,28.3437998 11.906458,28.4375293 10.1246602,28.6868498 L4.78114163,12.9684132 Z\" id=\"Fill-14\"></path></g></svg>\n  )\n}\n","export default __webpack_public_path__ + \"static/media/step1.2e3a32b3.svg\";","export default __webpack_public_path__ + \"static/media/step3.0a5b6686.svg\";","import React from 'react'\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\nimport { faComments, faInfoCircle, faLink, faCloudUploadAlt } from '@fortawesome/free-solid-svg-icons'\nimport Container from 'react-bootstrap/Container'\nimport Row from 'react-bootstrap/Row'\nimport Col from 'react-bootstrap/Col'\nimport Modal from 'react-bootstrap/Modal'\nimport NetflixLogo from 'Components/NetflixLogo'\nimport step1 from './step1.svg'\nimport step3 from './step3.svg'\nimport \"./landing.scss\"\n\ntype Props = {\n  fileContentCallback: (content:string) => any,\n}\n\ninterface State {\n  status: string,\n}\n\nexport default class Landing extends React.Component<Props,State> {\n  state = {\n    status: \"\",\n  }\n\n  uploadFile = (e: React.ChangeEvent<HTMLInputElement>) => {\n    e.preventDefault()\n    this.setState({\n      status: \"hahah...\"\n    })\n    const file = e.target.files?.[0]\n    if(file) {\n      const reader = new FileReader()\n      reader.onload = (e) => {\n        const content = e?.target?.result\n        if(content) {\n          this.props.fileContentCallback(content.toString())\n        }\n      }\n      reader.onerror = (err) => {\n        this.setState({\n          status: err.toString(),\n        })\n      }\n      reader.readAsText(file)\n      this.setState({\n        status: \"Loading...\"\n      })\n    }\n  }\n\n  getModal = () => {\n    if(this.state.status) {\n      return (\n        <Modal>\n          <Modal.Header>\n            <Modal.Title>{this.state.status}</Modal.Title>\n          </Modal.Header>\n        </Modal>\n      )\n    }\n  }\n\n\n  render() {\n    return (\n      <div id=\"landing\">\n        {this.getModal()}\n\n        <Container>\n          <Row>\n            <Col>\n              <header>\n                <div className=\"navIconContainer\">\n                  <div className=\"navIcon\">\n                    <FontAwesomeIcon icon={faComments}/>\n                  </div>\n                  <div>Feedback</div>\n                  <div>Survey</div>\n                </div>\n                <NetflixLogo/>\n                <div className=\"navIconContainer\">\n                  <div className=\"navIcon\">\n                    <FontAwesomeIcon icon={faInfoCircle}/>\n                  </div>\n                  <div>Design &</div>\n                  <div>Development</div>\n                </div>\n              </header>\n\n              <section>\n                <p><b>By Matthew Lau & Harry Li</b></p>\n                <p>Description in progress</p>\n              </section>\n\n              <section>\n                images\n              </section>\n\n              <section id=\"instructions\">\n                <p>INSTRUCTIONS:</p>\n\n                <div className=\"stepContainer\">\n                  <div className=\"step\">STEP 1</div>\n\n                  <div className=\"stepContent\">\n                    <div className=\"stepTitle\">LOG IN TO NETFLIX</div>\n                    <p>If you are using a shared account, make sure you are logged into your specific profile</p>\n                  </div>\n\n                  <div className=\"stepIcon\"><img src={step1} alt=\"step 1\"/></div>\n                </div>\n\n                <div className=\"stepContainer\">\n                  <div className=\"step\">STEP 2</div>\n\n                  <div className=\"stepContent\">\n                    <div className=\"stepTitle\">CLICK HERE</div>\n                    <p>Links to official Netflix Viewing Activity log <a href=\"https:///www.netflix.com/viewingactivity\" target=\"_blank\" rel=\"noopener noreferrer\">https:///www.netflix.com/viewingactivity</a></p>\n                  </div>\n\n                  <div className=\"stepIcon\">\n                    <a href=\"https:///www.netflix.com/viewingactivity\" target=\"_blank\" rel=\"noopener noreferrer\">\n                      <div id=\"step2IconContainer\">\n                        <div id=\"step2Icon\"><FontAwesomeIcon icon={faLink}/></div>\n                        <div>Netflix viewing</div>\n                        <div>activity URL</div>\n                      </div>\n                    </a>\n                  </div>\n                </div>\n\n                <div className=\"stepContainer\">\n                  <div className=\"step\">STEP 3</div>\n\n                  <div className=\"stepContent\">\n                    <div className=\"stepTitle\">Click \"Download all\"</div>\n                    <p>Scroll all the way to the bottom of the page and click on \"Download All\"</p>\n                  </div>\n\n                  <div className=\"stepIcon\"><img src={step3} alt=\"step 3\"/></div>\n                </div>\n\n                <div className=\"stepContainer\">\n                  <div className=\"step\">STEP 4</div>\n\n                  <div className=\"stepContent\">\n                    <div className=\"stepTitle\">UPLOAD .CSV FILE HERE</div>\n                  </div>\n\n                  <div className=\"stepIcon\"></div>\n                </div>\n              </section>\n\n              <section>\n                <div id=\"uploadFileContainer\">\n                  <label id=\"fileUploadButton\" htmlFor=\"fileUpload\">\n                    <FontAwesomeIcon icon={faCloudUploadAlt}/>\n                  </label>\n                  <input id=\"fileUpload\" type=\"file\" onChange={this.uploadFile} accept=\".csv\" hidden/>\n                </div>\n              </section>\n\n              <section>\n                <button id=\"submitButton\">\n                  Letâ€™s see your 2020 Netflix YEAR IN REVIEW!\n                </button>\n              </section>\n            </Col>\n          </Row>\n        </Container>\n      </div>\n    )\n  }\n}\n","export default async function shareApi(blob:Blob) {\n  try {\n    // @ts-ignore\n    const result = await navigator.share({ files: [blob] })\n    console.log(\"Share Successful\")\n    return true\n  }\n  catch(err) {\n    console.error(err)\n  }\n\n  return false\n}\n","export default __webpack_public_path__ + \"static/media/top5.6ba5dd6b.jpg\";","import React from 'react'\nimport memoize from 'memoize-one'\nimport Container from 'react-bootstrap/Container'\nimport Row from 'react-bootstrap/Row'\nimport Col from 'react-bootstrap/Col'\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\nimport { faDownload, faShare } from '@fortawesome/free-solid-svg-icons'\nimport shareApi from \"utils/shareApi\"\nimport backgroundImageSrc from \"./top5.jpg\"\nimport \"./posterTopX.scss\"\n\nexport type PosterTopXRequiredProps = {\n  align: string,\n  imgSrc: string,\n  titles: string[],\n  year: number,\n}\n\nexport type Props = PosterTopXRequiredProps\n\ninterface State {\n  backgroundImage: {height:number, width:number},\n  posterImage: {height:number, width:number},\n  showShare: boolean,\n}\n\n\nconst EXPECTED_IMAGE_DIMENSIONS = {\n  height: 952,\n  width: 998,\n}\n\nexport default class PosterTopX extends React.Component<Props,{}> {\n  canvasRef: React.RefObject<HTMLCanvasElement> = React.createRef()\n  ctx?: CanvasRenderingContext2D | null\n\n  state = {\n    backgroundImage: {height:0, width:0},\n    posterImage: {height:0, width:0},\n    showShare: navigator.share !== undefined,\n  }\n\n  componentDidMount() {\n    if(this.canvasRef.current) {\n      this.ctx = this.canvasRef.current.getContext('2d')\n      this.forceUpdate()\n    }\n  }\n\n  componentDidUpdate() {\n    const {\n      align,\n      imgSrc,\n      titles,\n      year,\n    } = this.props\n\n    const {\n      posterImage,\n    } = this.state\n\n    const ctx = this.ctx\n    if(ctx) {\n      ctx.drawImage(this.getBackgroundImage(backgroundImageSrc), 0, 0)\n\n      //crop a square from the image\n      ctx.drawImage(\n        this.getPosterImage(imgSrc),\n        (\n          align === \"center\"\n          ? (posterImage.width - posterImage.height) / 2\n          : posterImage.width - posterImage.height\n        ),\n        0,\n        Math.min(posterImage.width, posterImage.height),\n        Math.min(posterImage.width, posterImage.height),\n        0,\n        225,\n        EXPECTED_IMAGE_DIMENSIONS.width,\n        EXPECTED_IMAGE_DIMENSIONS.height,\n      )\n\n      ctx.font = '120px Bebas Neue'\n      ctx.fillStyle = \"white\";\n      ctx.fillText(this.props.titles[0], this.state.backgroundImage.width/3 - 100, this.state.backgroundImage.height*2/3 + 50)\n\n      ctx.font = '80px Bebas Neue'\n      titles.slice(1).forEach((t,i) => {\n        if(ctx) {\n          ctx.fillText(t, this.state.backgroundImage.width/3 - 100, this.state.backgroundImage.height*2/3 + 175 + 89*i)\n        }\n      })\n    }\n  }\n\n  getBackgroundImage = memoize(\n    (imgSrc: string) => {\n      const img = new Image()\n      img.src = imgSrc\n      img.setAttribute('crossorigin', 'anonymous')\n      img.onload = () => this.setState({\n        backgroundImage: {height: img.height, width: img.width}\n      })\n\n      return img\n    }\n  )\n\n  getPosterImage = memoize(\n    (imgSrc: string) => {\n      const img = new Image()\n      img.src = imgSrc\n      img.setAttribute('crossorigin', 'anonymous')\n      img.onload = () => this.setState({\n        posterImage: {height: img.height, width: img.width}\n      })\n\n      return img\n    }\n  )\n\n  download = () => {\n    if(this.canvasRef.current) {\n      const a = document.createElement(\"a\")\n      a.href = this.canvasRef.current.toDataURL(\"image/png\")\n      a.download = \"Netflix_Year_In_Review_Top_5.png\"\n      a.click()\n    }\n  }\n\n  share = () => {\n    if(this.canvasRef.current) {\n      this.canvasRef.current.toBlob((blob) => {\n        if(blob) {\n          shareApi(blob)\n          // const dumb = async () => {\n          //   if(await shareApi(blob) === false) {\n          //     this.setState({showShare: true})\n          //   }\n          // }\n          //\n          // dumb()\n        }\n      })\n    }\n  }\n\n  showShare = () => {\n    if(this.state.showShare) {\n      return (\n        <button onClick={e => this.share()}>\n          <FontAwesomeIcon icon={faShare}/> Share\n        </button>\n      )\n    }\n  }\n\n\n  render() {\n    return (\n      <div className=\"poster\">\n        <Container>\n          <Row>\n            <Col>\n              <canvas ref={this.canvasRef} width={this.state.backgroundImage.width} height={this.state.backgroundImage.height}/>\n\n              <div>\n                <button onClick={e => this.download()}><FontAwesomeIcon icon={faDownload}/> Save Image</button>\n                {this.showShare()}\n              </div>\n            </Col>\n          </Row>\n        </Container>\n      </div>\n    )\n  }\n}\n","export const SERVER_URL = window.location.protocol + \"//\" + (process.env.REACT_APP_SERVER_DOMAIN || \"localhost:5000\")\nexport const TOP_X = 5\nexport const YEAR = 2020\n","import { csvParse } from \"d3\"\n\nexport type CsvDataType = {\n  Date: Date,\n  Title: string,\n  topNodeId: string,\n}\n\nexport default function parseCsvData(data:string):CsvDataType[] {\n  if(data) {\n    const parsedData = csvParse(data)\n    const rows: CsvDataType[] = []\n    for(let i=0; i<parsedData.length; ++i) {\n      const rawRow = parsedData[i]\n      // @ts-ignore\n      rows.push({\n        ...rawRow,\n        Date: new Date(rawRow.Date || new Date()),\n        topNodeId: \"\", //to be filled in later\n      })\n    }\n\n    return rows\n  }\n  else {\n    console.error(\"No Data\")\n  }\n\n  return []\n}\n","import indexOfMultiple from \"utils/indexOfMultiple\"\nimport { CsvDataType } from \"utils/parseCsvData\"\n\ntype NameDataType = {count: number, titles: Map<string, number>}\ntype NameMapType = Map<string,NameDataType>\nexport type TitleYearMapType = Map<number, {\n  [typeKey:string]: NameMapType,\n}>\n\nexport default function processCsvData(rows: CsvDataType[]) {\n  const titleYearMap:TitleYearMapType = new Map()\n\n  let multiplier = 1\n\n  //for each row\n  rows.forEach(row => {\n    const year = row.Date.getFullYear() //get the year\n    if(!titleYearMap.has(year)) { //if we are encountering this year for the first time\n      titleYearMap.set(year, { //initialize a value in the map for this year\n        serie: new Map<string,NameDataType>(),\n        movie: new Map<string,NameDataType>(),\n      })\n    }\n\n    const yearData = titleYearMap.get(year) //get the value for this year\n    if(yearData) { //keep typescript happy\n      //try to determine if this is a tv series\n      const index = indexOfMultiple(\n        row.Title,\n        [\": Season\",\": Volume\",\": Series\",\": Collection\"], //see if the title contains any of these substrings\n      )\n\n      const typeKey = index === -1 ? \"movie\" : \"serie\"\n      const nameKey = index === -1 ? row.Title : row.Title.slice(0, index) //this could be a movie name or tv show name\n      if(yearData[typeKey]) { //keep typescript happy\n        if(!yearData[typeKey].has(nameKey)) { //if we are encountering this name for the first time\n          multiplier = 1\n          yearData[typeKey].set(nameKey, { //initialize a value\n            count: 0,\n            titles: new Map<string, number>(),\n          })\n        }\n        else {\n          multiplier *= 1.1\n        }\n\n        const titleMap = yearData[typeKey].get(nameKey)\n        updateTitleData(multiplier, row.Title, titleMap)\n      }\n    }\n  })\n\n  return titleYearMap\n}\n\nfunction updateTitleData(\n  multiplier: number,\n  title: string,\n  titleData?: NameDataType,\n) {\n  if(titleData) { //keep typescript happy\n    const titleCount = titleData.titles.get(title)\n    if(titleCount === undefined) { //if we're seeing this title for the first time\n      titleData.titles.set(title, 1)\n      titleData.count += multiplier\n    }\n    else { //else we've seen this title before\n      titleData.titles.set(title, titleCount + 1)\n      titleData.count += multiplier * 1.5 //repeated viewings count for more\n    }\n  }\n}\n","/**\n * given a string and an array of search strings\n * return the index of the first valid search string\n * @param  string        string to search in\n * @param  searchStrings array of search strings\n * @return               the index of the first valid search string, else -1 if none of them are in the string\n */\nexport default function indexOfMultiple(string:string, searchStrings: string[]) {\n  for(let i=0; i<searchStrings.length; ++i) {\n    const index = string.indexOf(searchStrings[i])\n    if(index !== -1) {\n      return index\n    }\n  }\n\n  return -1\n}\n","import React from 'react'\nimport memoize from 'memoize-one'\nimport Landing from 'Components/Landing/Landing'\nimport PosterTopX, { PosterTopXRequiredProps } from 'Components/PosterTopX/PosterTopX'\nimport { SERVER_URL, TOP_X, YEAR } from \"consts\"\nimport parseCsvData, { CsvDataType } from \"utils/parseCsvData\"\nimport processCsvData, { TitleYearMapType } from \"utils/processCsvData\"\nimport './App.scss'\n\nexport type TVSeriesType = {\n  \"@context\": string,\n  \"@type\": string,\n  actors: {\n    \"@type\": string,\n    name: string,\n  }[],\n  awards: string,\n  contentRating: string,\n  creator: {\n    \"@type\": string,\n    name: string,\n  }[],\n  dateCreated: string,\n  description: string,\n  director: {\n    \"@type\": string,\n    name: string,\n  }[],\n  genre: string,\n  image: string,\n  name: string,\n  numberOfSeasons: number,\n  startDate: string,\n  url: string,\n}\n\ninterface State {\n  csvData: CsvDataType[],\n  errors: string[],\n  status: string,\n  titleYearMap: TitleYearMapType,\n  topXData: PosterTopXRequiredProps,\n}\n\nclass App extends React.Component<{},State> {\n  state:State = {\n    csvData: [],\n    errors: [],\n    status: \"\",\n    titleYearMap: new Map(),\n    topXData: { align: \"\", imgSrc: \"\", titles: [], year: 0 }\n  }\n\n  componentDidMount() {\n    this.fetchCsv()\n    fetch(`${SERVER_URL}/`)\n  }\n\n\n  fetchCsv() {\n    fetch('/example.csv').then((response) => {\n      if(response && response.body) {\n        const reader = response.body.getReader()\n        const decoder = new TextDecoder('utf-8')\n\n        return reader.read().then(\n          (result) => decoder.decode(result.value)\n        )\n      }\n      else {\n        throw new Error(\"No response or body\")\n      }\n    }).then(parseCsvData).then(this.processData).catch(err => console.error(err))\n  }\n\n  processData = async (rows:CsvDataType[]) => {\n    console.log(rows)\n    const titleYearMap = processCsvData(rows)\n\n    const yearData = titleYearMap.get(YEAR)\n    console.log(yearData)\n    if(yearData) {\n      this.setState({\n        csvData: rows,\n        titleYearMap,\n      })\n      this.getTopXData(titleYearMap, YEAR)\n    }\n  }\n\n  getTopXData = memoize(\n    async (titleYearMap: TitleYearMapType, year: number) => {\n      const data = titleYearMap.get(year)\n      if(data) {\n        const serieData = Array.from(data.serie).sort(\n          (a, b) => {\n            if(a[1].titles.size > b[1].titles.size) return -1\n            return 1\n          }\n        )\n\n        const titles = serieData.slice(0, TOP_X).map(d => d[0])\n        this.setState({\n          topXData: {\n            ...await this.getImgSrcFromTitle(titles[0]),\n            titles,\n            year: YEAR,\n          }\n        })\n      }\n    }\n  )\n\n  getImgSrcFromTitle = memoize(\n    async (title:string) => {\n      // try {\n      //   //try to get the top node id\n      //   const topNodeId = parseInt(\n      //     await fetch(`${SERVER_URL}/topNodeIdFromTitle/${title}`).then(response => response.text())\n      //   )\n      //\n      //   //if the top node id is valid\n      //   if(!isNaN(topNodeId)) {\n      //     const data:TVSeriesType = await fetch(`${SERVER_URL}/title/${topNodeId}`).then(response => response.json())\n      //     return {\n      //       align: \"right\",\n      //       imgSrc: data.image,\n      //     }\n      //   }\n      //   else {\n      //     throw new Error(`No top node id returned for ${title}`)\n      //   }\n      // }\n      // catch(err) { //if there was some error, move on to the next title in the array\n      //   console.error(err)\n      // }\n\n\n      try {\n        const data = await fetch(`${SERVER_URL}/tmdbInfo/${title}`).then(response => response.json())\n        console.log(data)\n        const imgSrc = `https://image.tmdb.org/t/p/original/${data.results[0].backdrop_path}`\n        console.log(imgSrc)\n        return {\n          align: \"center\",\n          imgSrc,\n        }\n      }\n      catch(err) {\n        console.error(err)\n      }\n\n      //we didn't find any valid images\n      return {align:\"\",imgSrc:\"\"}\n    }\n  )\n\n  fileContentCallback = (content:string) => {\n    this.processData(parseCsvData(content)).catch(console.error)\n  }\n\n\n  renderContent = () => {\n    if(this.state.topXData.imgSrc) {\n      return (\n        <div>\n          <PosterTopX\n            {...this.state.topXData}\n          />\n        </div>\n      )\n    }\n\n    return (\n      <Landing\n        fileContentCallback={this.fileContentCallback}\n      />\n    )\n  }\n\n  render() {\n    return (\n      <div className=\"App\">\n        {this.renderContent()}\n      </div>\n    )\n  }\n}\n\nexport default App;\n","import { ReportHandler } from 'web-vitals';\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}