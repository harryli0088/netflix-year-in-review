(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{57:function(e,t,n){},64:function(e,t,n){},65:function(e,t,n){},67:function(e,t,n){},68:function(e,t,n){},69:function(e,t,n){"use strict";n.r(t);var a=n(1),c=n(0),r=n.n(c),i=n(6),s=n.n(i),o=(n(56),n(57),n(10)),l=n(5),d=n.n(l),u=n(17),h=n(13),j=n(14),f=n(16),p=n(15),b=n(18),v=n(7),g=n(8),x=(n(64),function(e){return Object(a.jsx)("div",{className:"customContainer",children:Object(a.jsx)("div",{className:"customContainerContent",children:e.children})})}),O=n(22);function m(){return Object(a.jsx)("svg",{id:"netflixLogo",viewBox:"0 0 111 30",children:Object(a.jsx)("g",{children:Object(a.jsx)("path",{fill:"#e50914",d:"M105.06233,14.2806261 L110.999156,30 C109.249227,29.7497422 107.500234,29.4366857 105.718437,29.1554972 L102.374168,20.4686475 L98.9371075,28.4375293 C97.2499766,28.1563408 95.5928391,28.061674 93.9057081,27.8432843 L99.9372012,14.0931671 L94.4680851,-5.68434189e-14 L99.5313525,-5.68434189e-14 L102.593495,7.87421502 L105.874965,-5.68434189e-14 L110.999156,-5.68434189e-14 L105.06233,14.2806261 Z M90.4686475,-5.68434189e-14 L85.8749649,-5.68434189e-14 L85.8749649,27.2499766 C87.3746368,27.3437061 88.9371075,27.4055675 90.4686475,27.5930265 L90.4686475,-5.68434189e-14 Z M81.9055207,26.93692 C77.7186241,26.6557316 73.5307901,26.4064111 69.250164,26.3117443 L69.250164,-5.68434189e-14 L73.9366389,-5.68434189e-14 L73.9366389,21.8745899 C76.6248008,21.9373887 79.3120255,22.1557784 81.9055207,22.2804387 L81.9055207,26.93692 Z M64.2496954,10.6561065 L64.2496954,15.3435186 L57.8442216,15.3435186 L57.8442216,25.9996251 L53.2186709,25.9996251 L53.2186709,-5.68434189e-14 L66.3436123,-5.68434189e-14 L66.3436123,4.68741213 L57.8442216,4.68741213 L57.8442216,10.6561065 L64.2496954,10.6561065 Z M45.3435186,4.68741213 L45.3435186,26.2498828 C43.7810479,26.2498828 42.1876465,26.2498828 40.6561065,26.3117443 L40.6561065,4.68741213 L35.8121661,4.68741213 L35.8121661,-5.68434189e-14 L50.2183897,-5.68434189e-14 L50.2183897,4.68741213 L45.3435186,4.68741213 Z M30.749836,15.5928391 C28.687787,15.5928391 26.2498828,15.5928391 24.4999531,15.6875059 L24.4999531,22.6562939 C27.2499766,22.4678976 30,22.2495079 32.7809542,22.1557784 L32.7809542,26.6557316 L19.812541,27.6876933 L19.812541,-5.68434189e-14 L32.7809542,-5.68434189e-14 L32.7809542,4.68741213 L24.4999531,4.68741213 L24.4999531,10.9991564 C26.3126816,10.9991564 29.0936358,10.9054269 30.749836,10.9054269 L30.749836,15.5928391 Z M4.78114163,12.9684132 L4.78114163,29.3429562 C3.09401069,29.5313525 1.59340144,29.7497422 0,30 L0,-5.68434189e-14 L4.4690224,-5.68434189e-14 L10.562377,17.0315868 L10.562377,-5.68434189e-14 L15.2497891,-5.68434189e-14 L15.2497891,28.061674 C13.5935889,28.3437998 11.906458,28.4375293 10.1246602,28.6868498 L4.78114163,12.9684132 Z",id:"Fill-14"})})})}var w=n.p+"static/media/step1.abd23c8c.svg",L=n.p+"static/media/step3.f82e6f03.svg",C=(n(65),function(e){Object(f.a)(n,e);var t=Object(p.a)(n);function n(){var e;Object(h.a)(this,n);for(var c=arguments.length,r=new Array(c),i=0;i<c;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).state={status:""},e.uploadFile=function(t){var n;t.preventDefault(),e.setState({status:"hahah..."});var a=null===(n=t.target.files)||void 0===n?void 0:n[0];if(a){var c=new FileReader;c.onload=function(t){var n,a=null===t||void 0===t||null===(n=t.target)||void 0===n?void 0:n.result;a&&e.props.fileContentCallback(a.toString())},c.onerror=function(t){e.setState({status:t.toString()})},c.readAsText(a),e.setState({status:"Loading..."})}},e.getModal=function(){if(e.state.status)return Object(a.jsx)(O.a,{children:Object(a.jsx)(O.a.Header,{children:Object(a.jsx)(O.a.Title,{children:e.state.status})})})},e}return Object(j.a)(n,[{key:"render",value:function(){return Object(a.jsxs)("div",{id:"landing",children:[this.getModal(),Object(a.jsxs)(x,{children:[Object(a.jsxs)("header",{children:[Object(a.jsxs)("div",{className:"navIconContainer",children:[Object(a.jsx)("div",{className:"navIcon",children:Object(a.jsx)(v.a,{icon:g.b})}),Object(a.jsx)("div",{children:"Feedback"}),Object(a.jsx)("div",{children:"Survey"})]}),Object(a.jsx)(m,{}),Object(a.jsxs)("div",{className:"navIconContainer",children:[Object(a.jsx)("div",{className:"navIcon",children:Object(a.jsx)(v.a,{icon:g.d})}),Object(a.jsx)("div",{children:"Design &"}),Object(a.jsx)("div",{children:"Development"})]})]}),Object(a.jsxs)("section",{children:[Object(a.jsx)("p",{children:Object(a.jsx)("b",{children:"By Matthew Lau & Harry Li"})}),Object(a.jsx)("p",{children:"Description in progress"})]}),Object(a.jsx)("section",{children:"images"}),Object(a.jsxs)("section",{id:"instructions",children:[Object(a.jsx)("p",{children:"INSTRUCTIONS:"}),Object(a.jsxs)("div",{className:"stepContainer",children:[Object(a.jsxs)("div",{className:"stepContent",children:[Object(a.jsx)("div",{className:"stepTitle",children:"1. LOG IN TO NETFLIX"}),Object(a.jsx)("p",{children:"If you are using a shared account, make sure you are logged into your specific profile"})]}),Object(a.jsx)("div",{className:"stepIcon",children:Object(a.jsx)("img",{src:w,alt:"step 1"})})]}),Object(a.jsxs)("div",{className:"stepContainer",children:[Object(a.jsxs)("div",{className:"stepContent",children:[Object(a.jsx)("div",{className:"stepTitle",children:"2. CLICK HERE"}),Object(a.jsxs)("p",{children:["Links to official Netflix Viewing Activity log ",Object(a.jsx)("a",{href:"https:///www.netflix.com/viewingactivity",target:"_blank",rel:"noopener noreferrer",children:"https:///www.netflix.com/viewingactivity"})]})]}),Object(a.jsx)("div",{className:"stepIcon",children:Object(a.jsx)("a",{href:"https:///www.netflix.com/viewingactivity",target:"_blank",rel:"noopener noreferrer",children:Object(a.jsxs)("div",{id:"step2IconContainer",children:[Object(a.jsx)("div",{id:"step2Icon",children:Object(a.jsx)(v.a,{icon:g.e})}),Object(a.jsx)("div",{children:"Netflix viewing"}),Object(a.jsx)("div",{children:"activity URL"})]})})})]}),Object(a.jsxs)("div",{className:"stepContainer",children:[Object(a.jsxs)("div",{className:"stepContent",children:[Object(a.jsx)("div",{className:"stepTitle",children:'3. Click "Download all"'}),Object(a.jsx)("p",{children:'Scroll all the way to the bottom of the page and click on "Download All"'})]}),Object(a.jsx)("div",{className:"stepIcon",children:Object(a.jsx)("img",{src:L,alt:"step 3"})})]}),Object(a.jsxs)("div",{className:"stepContainer",children:[Object(a.jsx)("div",{className:"stepContent",children:Object(a.jsx)("div",{className:"stepTitle",children:"4. UPLOAD .CSV FILE HERE"})}),Object(a.jsx)("div",{className:"stepIcon"})]})]}),Object(a.jsx)("section",{children:Object(a.jsxs)("div",{id:"uploadFileContainer",children:[Object(a.jsxs)("label",{id:"fileUploadButton",htmlFor:"fileUpload",children:["Tap to Upload ",Object(a.jsx)(v.a,{icon:g.a})]}),Object(a.jsx)("input",{id:"fileUpload",type:"file",onChange:this.uploadFile,accept:".csv",hidden:!0})]})})]})]})}}]),n}(r.a.Component));function I(e){return y.apply(this,arguments)}function y(){return(y=Object(u.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,navigator.share({files:[t]});case 3:return e.sent,console.log("Share Successful"),e.abrupt("return",!0);case 8:e.prev=8,e.t0=e.catch(0),console.error(e.t0);case 11:return e.abrupt("return",!1);case 12:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}var k=n.p+"static/media/top5.6ba5dd6b.jpg",N=(n(67),window.devicePixelRatio,952),S=998,D=function(e){Object(f.a)(n,e);var t=Object(p.a)(n);function n(){var e;Object(h.a)(this,n);for(var c=arguments.length,i=new Array(c),s=0;s<c;s++)i[s]=arguments[s];return(e=t.call.apply(t,[this].concat(i))).canvasRef=r.a.createRef(),e.ctx=void 0,e.imgRef=r.a.createRef(),e.state={backgroundImage:{height:0,width:0},posterImage:{height:0,width:0},showShare:void 0!==navigator.share},e.componentDidUpdate=function(){var t=e.props,n=t.align,a=t.imgSrc,c=t.titles,r=(t.year,e.state.posterImage),i=e.ctx;i&&(i.save(),i.drawImage(e.getBackgroundImage(k),0,0),i.drawImage(e.getPosterImage(a),"center"===n?(r.width-r.height)/2:r.width-r.height,0,Math.min(r.width,r.height),Math.min(r.width,r.height),0,225,S,N),i.font="120px Bebas Neue",i.fillStyle="white",i.fillText(e.props.titles[0],e.state.backgroundImage.width/3-100,2*e.state.backgroundImage.height/3+50),i.font="80px Bebas Neue",c.slice(1).forEach((function(t,n){i&&i.fillText(t,e.state.backgroundImage.width/3-100,2*e.state.backgroundImage.height/3+175+89*n)})),i.restore(),e.canvasRef.current&&e.imgRef.current&&(e.imgRef.current.src=e.canvasRef.current.toDataURL("image/png")))},e.getBackgroundImage=Object(b.a)((function(t){var n=new Image;return n.src=t,n.setAttribute("crossorigin","anonymous"),n.onload=function(){return e.setState({backgroundImage:{height:n.height,width:n.width}})},n})),e.getPosterImage=Object(b.a)((function(t){var n=new Image;return n.src=t,n.setAttribute("crossorigin","anonymous"),n.onload=function(){return e.setState({posterImage:{height:n.height,width:n.width}})},n})),e.download=function(){if(e.canvasRef.current){var t=document.createElement("a");t.href=e.canvasRef.current.toDataURL("image/png"),t.download="Netflix_Year_In_Review_Top_5.png",t.click()}},e.share=function(){e.canvasRef.current&&e.canvasRef.current.toBlob((function(e){e&&I(e)}))},e.showShare=function(){if(e.state.showShare)return Object(a.jsxs)("button",{onClick:function(t){return e.share()},children:[Object(a.jsx)(v.a,{icon:g.f})," Share"]})},e}return Object(j.a)(n,[{key:"componentDidMount",value:function(){this.canvasRef.current&&(this.ctx=this.canvasRef.current.getContext("2d"),this.forceUpdate())}},{key:"render",value:function(){var e=this;return Object(a.jsx)(x,{children:Object(a.jsxs)("div",{className:"poster",children:[Object(a.jsx)("canvas",{ref:this.canvasRef,width:this.state.backgroundImage.width,height:this.state.backgroundImage.height}),Object(a.jsx)("img",{ref:this.imgRef,alt:"Loading..."}),Object(a.jsxs)("div",{children:[Object(a.jsxs)("button",{onClick:function(t){return e.download()},children:[Object(a.jsx)(v.a,{icon:g.c})," Save Image"]}),this.showShare()]})]})})}}]),n}(r.a.Component),R=window.location.protocol+"//damp-citadel-74699.herokuapp.com",T=2020,M=n(30);function F(e){if(e){for(var t=Object(M.a)(e),n=[],a=0;a<t.length;++a){var c=t[a];n.push(Object(o.a)(Object(o.a)({},c),{},{Date:new Date(c.Date||new Date),topNodeId:""}))}return n}return console.error("No Data"),[]}function A(e){var t=new Map,n=1;return e.forEach((function(e){var a=e.Date.getFullYear();t.has(a)||t.set(a,{serie:new Map,movie:new Map});var c=t.get(a);if(c){var r=function(e,t){for(var n=0;n<t.length;++n){var a=e.indexOf(t[n]);if(-1!==a)return a}return-1}(e.Title,[": Season",": Volume",": Series",": Collection"]),i=-1===r?"movie":"serie",s=-1===r?e.Title:e.Title.slice(0,r);if(c[i]){c[i].has(s)?n*=1.1:(n=1,c[i].set(s,{count:0,titles:new Map}));var o=c[i].get(s);!function(e,t,n){if(n){var a=n.titles.get(t);void 0===a?(n.titles.set(t,1),n.count+=e):(n.titles.set(t,a+1),n.count+=1.5*e)}}(n,e.Title,o)}}})),t}n(68);var E=function(e){Object(f.a)(n,e);var t=Object(p.a)(n);function n(){var e;Object(h.a)(this,n);for(var c=arguments.length,r=new Array(c),i=0;i<c;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).state={csvData:[],errors:[],status:"",titleYearMap:new Map,topXData:{align:"",imgSrc:"",titles:[],year:0}},e.processData=function(){var t=Object(u.a)(d.a.mark((function t(n){var a,c;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:console.log(n),a=A(n),c=a.get(T),console.log(c),c&&(e.setState({csvData:n,titleYearMap:a}),e.getTopXData(a,T));case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.getTopXData=Object(b.a)(function(){var t=Object(u.a)(d.a.mark((function t(n,a){var c,r,i;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(c=n.get(a))){t.next=17;break}return r=Array.from(c.serie).sort((function(e,t){return e[1].titles.size>t[1].titles.size?-1:1})),i=r.slice(0,5).map((function(e){return e[0]})),t.t0=e,t.t1=o.a,t.t2=o.a,t.t3={},t.next=10,e.getImgSrcFromTitle(i[0]);case 10:t.t4=t.sent,t.t5=(0,t.t2)(t.t3,t.t4),t.t6={},t.t7={titles:i,year:T},t.t8=(0,t.t1)(t.t5,t.t6,t.t7),t.t9={topXData:t.t8},t.t0.setState.call(t.t0,t.t9);case 17:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()),e.getImgSrcFromTitle=Object(b.a)(function(){var e=Object(u.a)(d.a.mark((function e(t){var n,a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat(R,"/tmdbInfo/").concat(t)).then((function(e){return e.json()}));case 3:return n=e.sent,console.log(n),a="https://image.tmdb.org/t/p/original/".concat(n.results[0].backdrop_path),console.log(a),e.abrupt("return",{align:"center",imgSrc:a});case 10:e.prev=10,e.t0=e.catch(0),console.error(e.t0);case 13:return e.abrupt("return",{align:"",imgSrc:""});case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}()),e.fileContentCallback=function(t){e.processData(F(t)).catch(console.error)},e.renderContent=function(){return e.state.topXData.imgSrc?Object(a.jsx)("div",{children:Object(a.jsx)(D,Object(o.a)({},e.state.topXData))}):Object(a.jsx)(C,{fileContentCallback:e.fileContentCallback})},e}return Object(j.a)(n,[{key:"componentDidMount",value:function(){fetch("".concat(R,"/"))}},{key:"fetchCsv",value:function(){fetch("/example.csv").then((function(e){if(e&&e.body){var t=e.body.getReader(),n=new TextDecoder("utf-8");return t.read().then((function(e){return n.decode(e.value)}))}throw new Error("No response or body")})).then(F).then(this.processData).catch((function(e){return console.error(e)}))}},{key:"render",value:function(){return Object(a.jsx)("div",{className:"App",children:this.renderContent()})}}]),n}(r.a.Component),U=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,71)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,r=t.getLCP,i=t.getTTFB;n(e),a(e),c(e),r(e),i(e)}))};s.a.render(Object(a.jsx)(r.a.StrictMode,{children:Object(a.jsx)(E,{})}),document.getElementById("root")),U()}},[[69,1,2]]]);
//# sourceMappingURL=main.249dbf2b.chunk.js.map